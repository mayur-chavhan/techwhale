<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>From Code to Kubernetes: The Kaniko Method for Node.js Deployment - TechWhale </title>
	
    
	<link rel="canonical" href="https://techwhale.in/building-nodejs-container-images-in-kubernetes-the-kaniko-way/">
	
	<link rel="alternate" type="application/atom+xml" href="https://techwhale.in/feed.xml" title="TechWhale - RSS">
<link rel="alternate" type="application/json" href="https://techwhale.in/feed.json" title="TechWhale - JSON">

    
	    <link rel="shortcut icon" href="https://techwhale.in/media/website/imageedit_26_9569312189.png" type="image/x-icon" />
    
    <link rel="stylesheet" href="https://techwhale.in/assets/css/style.css?v=a6644564c1a37b93df20a78bed859f25">	
	<script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://techwhale.in/building-nodejs-container-images-in-kubernetes-the-kaniko-way/"},"headline":"From Code to Kubernetes: The Kaniko Method for Node.js Deployment","datePublished":"2025-03-30T16:30+05:30","dateModified":"2025-04-09T01:48+05:30","image":{"@type":"ImageObject","url":"https://techwhale.in/media/posts/47/1.png","height":1260,"width":2240},"description":"Install free and open source application on Linux, Docker, Virtualization, Ansible Automation","author":{"@type":"Person","name":"Mayur Chavhan","url":"https://techwhale.in/authors/mayur-chavhan/"},"publisher":{"@type":"Organization","name":"Mayur Chavhan","logo":{"@type":"ImageObject","url":"https://techwhale.in/media/website/imageedit_19_3669952192.png","height":183,"width":778}}}</script>
        
	<link rel="stylesheet" href="{{css "prism.css" }}">
 
<script data-ad-client="ca-pub-4519080780415943" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146201757-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-146201757-2');
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LP4P7CP531"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LP4P7CP531');
</script>

<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
<script>
  window.OneSignal = window.OneSignal || [];
  OneSignal.push(function() {
    OneSignal.init({
      appId: "e75acce1-984a-46e6-ad91-9eb63ee0e9b1",
    });
  });
</script>
<script data-ad-client="ca-pub-4591308678247525" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
	
<header class="topbar" id="js-header">
    <div class="topbar__inner">
        <a class="logo" href="https://techwhale.in/">
                <img src="https://techwhale.in/media/website/imageedit_19_3669952192.png" alt="TechWhale" width="778" height="183">
        </a>
               <nav class="navbar">
                  <button
                     class="navbar__toggle"
                     aria-label="Menu"
                     aria-haspopup="true"
                     aria-expanded="false">
                     <span class="navbar__toggle-box">
                        <span class="navbar__toggle-inner">Menu</span>
                     </span>
                  </button>
                <ul class="navbar__menu">
                         <li>
                           <a
                              href="https://techwhale.in/"
                                 title="home"
                                 target="_self"
            >
                              Home
                          </a>
            
                     </li>
                         <li>
                           <a
                              href="https://techwhale.in/category/devops/"
                                 target="_self"
            >
                              Guides
                          </a>
            
                     </li>
                         <li>
                           <a
                              href="https://techwhale.in/category/tutorials/"
                                 title="tutorial"
                                 target="_self"
            >
                              Tutorials
                          </a>
            
                     </li>
                         <li>
                           <a
                              href="https://techwhale.in/authors/mayur-chavhan/"
                                 target="_self"
            >
                              Contact
                          </a>
            
                     </li>
                </ul>
               </nav>
    </div>
</header>
<div class="main-content">
<main class="main post">
      <article class="content">
               <figure class="content__featured-image">                      
                  <img
                     src="https://techwhale.in/media/posts/47/1.png"
                        srcset="https://techwhale.in/media/posts/47/responsive/1-xs.webp 300w ,https://techwhale.in/media/posts/47/responsive/1-sm.webp 480w ,https://techwhale.in/media/posts/47/responsive/1-md.webp 768w ,https://techwhale.in/media/posts/47/responsive/1-lg.webp 1024w ,https://techwhale.in/media/posts/47/responsive/1-xl.webp 1360w ,https://techwhale.in/media/posts/47/responsive/1-2xl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px"
                      loading="eager"
                     height="1260"
                     width="2240"
                     alt="">
                     
               </figure>

         <header class="u-header content__header">
            <h1>
               From Code to Kubernetes: The Kaniko Method for Node.js Deployment
            </h1>
               <div class="u-header__meta u-small">


                  <div>
                           <a href="https://techwhale.in/authors/mayur-chavhan/" title="Mayur Chavhan">Mayur Chavhan</a>

                        <time datetime="2025-03-30T16:30">
                              March 30, 2025
                        </time>

                  </div>

               </div>
         </header>

         <div class="content__entry u-inner">
            <p>Tired of wrestling with Docker-in-Docker for your Kubernetes deployments? Want to build container images right inside your cluster without the security headaches? This guide will walk you through deploying a Node.js application to Kubernetes using Kaniko - the container builder that works without needing a Docker daemon. Ready to level-up your DevOps skills? Let‚Äôs dive in! üöÄ</p><h2 id="why-this-matters-for-real-world-projects">Why This Matters (For Real-World Projects)</h2>
<p>In modern development environments, building container images inside Kubernetes clusters has become increasingly necessary. But running Docker inside containers creates security vulnerabilities and permission nightmares.</p><p><strong>Kaniko</strong> <em>(think of it as your robot assistant that builds containers without the usual Docker overhead)</em> solves this problem elegantly. Instead of requiring the Docker daemon, it executes container image builds in a standard Kubernetes pod, making your CI/CD pipeline more secure and flexible.</p><p>For production teams, this means:</p><ul>
<li>No more privileged containers just to build images</li>
<li>Streamlined build process inside your existing Kubernetes infrastructure</li>
<li>More consistent deployments across development and production</li>
</ul>
<p>For solo developers, you‚Äôll save countless hours debugging permission issues while keeping your deployment process clean and reproducible. It‚Äôs like having training wheels that actually make your bike faster! üèéÔ∏èüí®</p><h2 id="setting-up-your-nodejs-app-for-kaniko-deployment">Setting Up Your Node.js App for Kaniko Deployment</h2>
<h3 id="1-project-setup">1. Project Setup</h3>
<p>First, let‚Äôs create a simple Node.js application that we‚Äôll deploy:</p><pre><code class="language-bash">mkdir k8s-node-kaniko-demo
cd k8s-node-kaniko-demo
npm init -y
npm install express
touch server.js Dockerfile build.yaml deployment.yaml
</code></pre>
<p>For our server.js file, we‚Äôll create a super-simple Express server:</p><pre><code class="language-javascript">const express = require(&quot;express&quot;);
const app = express();
const PORT = process.env.PORT || 8080;

app.get(&quot;/&quot;, (req, res) =&gt; {
  res.send(
    &quot;Hey there, Kubernetes explorer!Your Node.js app is running in a container built with Kaniko. Pretty cool, right?&quot;
  );
});

app.listen(PORT, () =&gt; {
  console.log(`Server rocking and rolling on port ${PORT}`);
});
</code></pre>
<h3 id="2-creating-your-dockerfile">2. Creating Your Dockerfile</h3>
<p>Now, let‚Äôs package our app with a straightforward Dockerfile:</p><pre><code class="language-dockerfile"># Base image - like picking the foundation for your house
FROM node:16-alpine

# Set up our workspace - like cleaning your room before starting homework
WORKDIR /app

# Copy package files first (this helps with caching)
COPY package*.json ./

# Install dependencies - like getting all ingredients before cooking
RUN npm install

# Copy the rest of the app
COPY . .

# Tell the world which port we&#39;re using
EXPOSE 8080

# Start the app - it&#39;s showtime!
CMD [&quot;node&quot;, &quot;server.js&quot;]
</code></pre>
<h3 id="3-creating-the-kaniko-build-configuration">3. Creating the Kaniko Build Configuration</h3>
<p>Here‚Äôs where the Kaniko magic happens. Create a build.yaml file:</p><pre><code class="language-yaml">apiVersion: batch/v1
kind: Job
metadata:
  name: kaniko-node-builder
spec:
  template:
    spec:
      containers:
      - name: kaniko
        image: gcr.io/kaniko-project/executor:latest
        args:
        - &quot;--dockerfile=Dockerfile&quot;
        - &quot;--context=git://github.com/YOUR_USERNAME/k8s-node-kaniko-demo.git#refs/heads/main&quot;
        - &quot;--destination=YOUR_DOCKERHUB_USERNAME/node-kaniko-demo:latest&quot;
        volumeMounts:
        - name: docker-config
          mountPath: /kaniko/.docker/config.json
          subPath: config.json
      restartPolicy: Never
      volumes:
      - name: docker-config
        secret:
          secretName: docker-credentials
</code></pre>
<h3 id="4-setting-up-kubernetes-deployment">4. Setting Up Kubernetes Deployment</h3>
<p>Create your deployment.yaml file to run the app in Kubernetes:</p><pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: node-kaniko-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: node-kaniko-app
  template:
    metadata:
      labels:
        app: node-kaniko-app
    spec:
      containers:
      - name: node-app
        image: YOUR_DOCKERHUB_USERNAME/node-kaniko-demo:latest
        ports:
        - containerPort: 8080
---
apiVersion: v1
kind: Service
metadata:
  name: node-app-service
spec:
  selector:
    app: node-kaniko-app
  ports:
  - port: 80
    targetPort: 8080
  type: LoadBalancer
</code></pre>
<h2 id="lets-deploy-this-thing">Let‚Äôs Deploy This Thing!</h2>
<p>Now that our files are ready, let‚Äôs execute our plan step by step:</p><h3 id="1-push-your-code-to-github">1. Push Your Code to GitHub</h3>
<pre><code class="language-bash">git init
git add .
git commit -m &quot;Initial commit with Node.js app for Kaniko deployment&quot;
git remote add origin https://github.com/YOUR_USERNAME/k8s-node-kaniko-demo.git
git push -u origin main
</code></pre>
<h3 id="2-create-docker-credentials-secret">2. Create Docker Credentials Secret</h3>
<p>Before running Kaniko, we need to set up a secret for Docker Hub authentication:</p><pre><code class="language-bash">kubectl create secret docker-registry docker-credentials \
  --docker-username=YOUR_DOCKERHUB_USERNAME \
  --docker-password=YOUR_DOCKERHUB_PASSWORD \
  --docker-email=YOUR_EMAIL
</code></pre>
<h3 id="3-run-the-kaniko-build-job">3. Run the Kaniko Build Job</h3>
<pre><code class="language-bash">kubectl apply -f build.yaml
</code></pre>
<p>Watch the build progress:</p><pre><code class="language-bash">kubectl get pods
kubectl logs -f $(kubectl get pods -l job-name=kaniko-node-builder -o jsonpath=&#39;{.items[0].metadata.name}&#39;)
</code></pre>
<h3 id="4-deploy-your-application">4. Deploy Your Application</h3>
<p>Once the image is built and pushed:</p><pre><code class="language-bash">kubectl apply -f deployment.yaml
</code></pre>
<h3 id="5-access-your-application">5. Access Your Application</h3>
<pre><code class="language-bash">kubectl get services node-app-service
</code></pre>
<p>Look for the EXTERNAL-IP and access your app at <code>http://ip.</code>.</p><h2 id="pro-tips-for-kaniko-kubernetes-masters-‚ö†Ô∏è">Pro Tips for Kaniko Kubernetes Masters ‚ö†Ô∏è</h2>
<h4 id="‚ö†Ô∏è-context-is-everything">‚ö†Ô∏è Context Is Everything</h4>
<p>When specifying the Git context in build.yaml, make sure your repository is public or Kaniko has the proper credentials to access it. Otherwise, you‚Äôll get cryptic ‚Äúcontext deadline exceeded‚Äù errors that‚Äôll make you pull your hair out.</p><h4 id="‚ö†Ô∏è-cache-those-layers">‚ö†Ô∏è Cache Those Layers</h4>
<p>Want to speed up your builds? Add the <code>--cache=true</code> argument to Kaniko to enable layer caching:</p><pre><code class="language-yaml">args:
- &quot;--dockerfile=Dockerfile&quot;
- &quot;--context=git://github.com/...&quot;
- &quot;--destination=...&quot;
- &quot;--cache=true&quot;
</code></pre>
<h4 id="‚ö†Ô∏è-always-check-your-registry-credentials">‚ö†Ô∏è Always Check Your Registry Credentials</h4>
<p>If your Kaniko builds fail with ‚Äúunauthorized: authentication required‚Äù errors, your Docker Hub credentials are likely incorrect or expired. Don‚Äôt waste hours debugging - check those first!</p><pre><code class="language-bash"># Test your credentials work
kubectl get secret docker-credentials -o jsonpath=&#39;{.data.\.dockerconfigjson}&#39; | base64 -d
</code></pre>
<h2 id="in-very-simple-language-whats-really-going-on-here">In very simple language: What‚Äôs Really Going On Here?</h2>
<p><strong>Kubernetes</strong> <em>(like a super-organized lunch table coordinator at school)</em>: It‚Äôs a system that manages where and how your app containers run, making sure they‚Äôre healthy and accessible.</p><p><strong>Kaniko</strong> <em>(like building LEGO models without the official LEGO factory)</em>: A tool that builds container images without needing Docker installed - it works right inside Kubernetes!</p><p><strong>Node.js app</strong> <em>(like your school project that needs to be presented to the class)</em>: Your JavaScript code that needs to be packaged up so it can run anywhere.</p><p><strong>Container image</strong> <em>(like a perfectly packed lunch box)</em>: A standardized package containing your application and everything it needs to run.</p><p><strong>Docker Hub</strong> <em>(like Instagram for your lunch boxes)</em>: A place where you store your container images so Kubernetes can download and run them.</p><h2 id="troubleshooting-when-things-go-sideways">Troubleshooting When Things Go Sideways</h2>
<p>If y‚Äôall run into issues (and let‚Äôs be honest, we all do), here are some common problems and solutions:</p><ol>
<li><p><strong>Kaniko job never completes</strong>: Check your git repository URL and make sure the repository is accessible.</p></li>
<li><p><strong>Image builds but deployment fails</strong>: Verify your image name in the deployment file matches exactly what Kaniko pushed.</p></li>
<li><p><strong>Can‚Äôt access your application</strong>: If your service shows 
`` for EXTERNAL-IP, your Kubernetes cluster might not support LoadBalancer services. Try using NodePort instead:</p></li>
</ol>
<pre><code class="language-yaml">spec:
  type: NodePort
  ports:
  - port: 80
    targetPort: 8080
    nodePort: 30080
</code></pre>
<p>Then access your app at <code>http://ip:30080</code>.</p><h2 id="wrapping-it-up">Wrapping It Up</h2>
<p>Congratulations! You‚Äôve successfully deployed a Node.js application to Kubernetes using Kaniko. No more privileged containers or Docker-in-Docker headaches! This approach gives you a more secure and flexible way to build container images directly within your Kubernetes ecosystem.</p><p>Remember, DevOps isn‚Äôt just about following steps‚Äîit‚Äôs about understanding why each piece matters and how they all fit together to create a smooth deployment pipeline. By using Kaniko, you‚Äôve leveled up your Kubernetes game and made your deployments more secure.</p><p>What other containerization tools would you like to try with Kubernetes? Let us know in the comments below! üöÄüí°üîß</p>
         </div>
         
            <aside class="content__aside">
                     <div class="content__share">
                           <a
                              href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechwhale.in%2Fbuilding-nodejs-container-images-in-kubernetes-the-kaniko-way%2F"
                              class="js-share facebook"
                              title="Share with Facebook"
                              rel="nofollow noopener noreferrer"
                              aria-label="Share with Facebook">
                              <svg class="u-icon">
                                 <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#facebook"/>
                              </svg>
                           </a>
                        
                           <a
                              href="https://twitter.com/intent/tweet?url=https%3A%2F%2Ftechwhale.in%2Fbuilding-nodejs-container-images-in-kubernetes-the-kaniko-way%2F&amp;via=%40techwhale.in&amp;text=From%20Code%20to%20Kubernetes%3A%20The%20Kaniko%20Method%20for%20Node.js%20Deployment"
                              class="js-share twitter"
                              title="Share with Twitter"
                              rel="nofollow noopener noreferrer"
                              aria-label="Share with Twitter">
                              <svg class="u-icon">
                                 <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#twitter"/>
                              </svg>
                           </a>
                        
                        
                           <a
                              href="https://mix.com/add?url=https%3A%2F%2Ftechwhale.in%2Fbuilding-nodejs-container-images-in-kubernetes-the-kaniko-way%2F"
                              class="js-share mix"
                              title="Share with Mix"
                              rel="nofollow noopener noreferrer"
                              aria-label="Share with Mix">
                              <svg class="u-icon">
                                 <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#mix"/>
                              </svg>
                           </a>
                        
                           <a
                              href="https://wa.me/?text=From%20Code%20to%20Kubernetes%3A%20The%20Kaniko%20Method%20for%20Node.js%20Deployment https%3A%2F%2Ftechwhale.in%2Fbuilding-nodejs-container-images-in-kubernetes-the-kaniko-way%2F"
                              class="js-share whatsapp"
                              rel="nofollow noopener noreferrer"
                              title="Share with WhatsApp"
                              aria-label="Share with WhatsApp">
                              <svg class="u-icon">
                                 <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#whatsapp"/>
                              </svg>
                           </a>
                        
                           <a
                              href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftechwhale.in%2Fbuilding-nodejs-container-images-in-kubernetes-the-kaniko-way%2F"
                              class="js-share linkedin"
                              title="Share with LinkedIn"
                              rel="nofollow noopener noreferrer"
                              aria-label="Share with LinkedIn">
                              <svg class="u-icon">
                                 <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#linkedin"/>
                              </svg>
                           </a>
                        
                           <a
                              href="https://buffer.com/add?text=From%20Code%20to%20Kubernetes%3A%20The%20Kaniko%20Method%20for%20Node.js%20Deployment&amp;url=https%3A%2F%2Ftechwhale.in%2Fbuilding-nodejs-container-images-in-kubernetes-the-kaniko-way%2F"
                              class="js-share buffer"
                              title="Share with Buffer"
                              rel="nofollow noopener noreferrer"
                              aria-label="Share with Buffer">
                              <svg class="u-icon">
                                 <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#buffer"/>
                              </svg>
                           </a>
                     </div>
            </aside>
            <footer class="content__footer">
        


                     <nav class="content__nav box">
                           <div class="content__nav__prev">
                              <a href="https://techwhale.in/mastering-aws-ec2-backup-automation-a-python-driven-approach/" class="content__nav__link" rel="prev">
                                       <img 
                                             src="https://techwhale.in/media/posts/46/responsive/From-Code-to-Kubernetes-The-Kaniko-Method-for-Node.js-Deployment-xs.webp"
                                           loading="lazy"  
                                          alt=""
                                          height="1260" 
                                          width="2240">                                   
                                 <div class="u-small">
                                    Previous Post
                                    <h5>
                                       Python vs. Data Loss: Your EC2 Instance Backup Python Automation
                                    </h5>
                                 </div>
                              </a>
                           </div>
                           <div class="content__nav__next">
                              <a href="https://techwhale.in/kubernetes-clusters-made-easy-your-painless-aws-eks-setup-guide/" class="content__nav__link" rel="next">
                                 <div class="u-small">
                                    Next Post
                                    <h5>
                                       The Busy Developer&#x27;s Guide to Painless AWS Clusters: AWS EKS Setup Guide¬†¬†
                                    </h5>
                                 </div>
                                       <img 
                                             src="https://techwhale.in/media/posts/48/responsive/3-xs.webp"
                                           loading="lazy"  
                                          alt="The Busy Developer&#x27;s Guide to Painless AWS Clusters: AWS EKS Setup Guide  "
                                          height="1260" 
                                          width="2240">                                   
                              </a>
                           </div>
                     </nav>

                     <div class="content__related box">
                        <h3 class="box__title">
                           Related posts
                        </h3>
                        <div class="content__related-wrap">
                              <figure class="content__related-item">
                                 <figcaption>
                                    <h4 class="content__related-title">
                                       <a href="https://techwhale.in/ultimate-mcp-tools-setup-guide-for-claude-code-with-kimi-k2-api/" class="inverse">Ultimate MCP Tools Setup Guide for Claude Code</a>
                                    </h4>
                                    <time datetime="2025-09-05T14:15" class="u-small">
                                          September 5, 2025
                                    </time>
                                 </figcaption>
                              </figure>
                              <figure class="content__related-item">
                                       <a href="https://techwhale.in/complete-guide-building-beautiful-websites-with-claude-code-vscode-and-design-tools/" class="c-card__image">
                                          <img 
                                                src="https://techwhale.in/media/posts/55/responsive/From-Code-to-Kubernetes-The-Kaniko-Method-for-Node.js-Deployment-3-xs.webp"
                                              loading="lazy" 
                                             height="1260"
                                             width="2240"
                                             alt="Complete Guide: Building Beautiful Websites with Claude Code, VSCode, and Design Tools">
                                       </a>                                     
                                 <figcaption>
                                    <h4 class="content__related-title">
                                       <a href="https://techwhale.in/complete-guide-building-beautiful-websites-with-claude-code-vscode-and-design-tools/" class="inverse">Complete Guide: Building Beautiful Websites with Claude Code, VSCode, and Design Tools</a>
                                    </h4>
                                    <time datetime="2025-08-21T11:38" class="u-small">
                                          August 21, 2025
                                    </time>
                                 </figcaption>
                              </figure>
                              <figure class="content__related-item">
                                 <figcaption>
                                    <h4 class="content__related-title">
                                       <a href="https://techwhale.in/unlocking-ai-superpowers-in-vs-code-a-deep-dive-into-the-prompt-boost-extension/" class="inverse">Unlocking AI Superpowers in VS Code: A Deep Dive into the Prompt Boost Extension</a>
                                    </h4>
                                    <time datetime="2025-05-03T11:20" class="u-small">
                                          May 3, 2025
                                    </time>
                                 </figcaption>
                              </figure>
                              <figure class="content__related-item">
                                 <figcaption>
                                    <h4 class="content__related-title">
                                       <a href="https://techwhale.in/mastering-kubernetes-a-deep-dive-into-building-a-cluster-the-hard-way/" class="inverse">Mastering Kubernetes: A Deep Dive into Building a Cluster &quot;The Hard Way</a>
                                    </h4>
                                    <time datetime="2025-04-15T12:25" class="u-small">
                                          April 15, 2025
                                    </time>
                                 </figcaption>
                              </figure>
                        </div>
                     </div>
            </footer>
      </article>

         <div class="comments-area box">
            
         </div>

         <div class="banner banner--after-content">
            <style>.bmc-button img{height: 34px !important;width: 35px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{padding: 7px 15px 7px 10px !important;line-height: 35px !important;height:51px !important;text-decoration: none !important;display:inline-flex !important;color:#ffffff !important;background-color:#BD5FFF !important;border-radius: 5px !important;border: 1px solid transparent !important;padding: 7px 15px 7px 10px !important;font-size: 20px !important;letter-spacing:-0.08px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Lato', sans-serif !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#ffffff !important;}</style><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/mrmayur"><img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:5px;font-size:19px !important;">Buy me a coffee</span></a>
         </div>
</main>
<div class="sidebar">
         <section class="box featured">
            <h3 class="box__title">Featured</h3>
            <ul class="featured__container">
                     <li class="featured__item">
                        <div>
                           <a href="https://techwhale.in/ultimate-mcp-tools-setup-guide-for-claude-code-with-kimi-k2-api/" class="featured__title">Ultimate MCP Tools Setup Guide for Claude Code</a>
                              <time class="u-small" datetime="2025-09-05T14:15">
                                    September 5, 2025
                              </time>
                        </div>
                     </li>
                     <li class="featured__item">
                                 <a href="https://techwhale.in/complete-guide-building-beautiful-websites-with-claude-code-vscode-and-design-tools/" class="featured__image-link">
                                    <img 
                                          src="https://techwhale.in/media/posts/55/responsive/From-Code-to-Kubernetes-The-Kaniko-Method-for-Node.js-Deployment-3-xs.webp"
                                       class="lazyload"
                                        loading="lazy" 
                                       alt="Complete Guide: Building Beautiful Websites with Claude Code, VSCode, and Design Tools" 
                                       height="1260" 
                                       width="1260">
                                 </a>                               
                        <div>
                           <a href="https://techwhale.in/complete-guide-building-beautiful-websites-with-claude-code-vscode-and-design-tools/" class="featured__title">Complete Guide: Building Beautiful Websites with Claude Code, VSCode, and Design Tools</a>
                              <time class="u-small" datetime="2025-08-21T11:38">
                                    August 21, 2025
                              </time>
                        </div>
                     </li>
                     <li class="featured__item">
                                 <a href="https://techwhale.in/amazon-q-developer-cli-complete-guide-for-devops-and-development-teams/" class="featured__image-link">
                                    <img 
                                          src="https://techwhale.in/media/posts/54/responsive/From-Code-to-Kubernetes-The-Kaniko-Method-for-Node.js-Deployment-xs.webp"
                                       class="lazyload"
                                        loading="lazy" 
                                       alt="Amazon Q Developer CLI: Complete Guide for DevOps and Development Teams" 
                                       height="1260" 
                                       width="1260">
                                 </a>                               
                        <div>
                           <a href="https://techwhale.in/amazon-q-developer-cli-complete-guide-for-devops-and-development-teams/" class="featured__title">Amazon Q Developer CLI: Complete Guide for DevOps and Development Teams</a>
                              <time class="u-small" datetime="2025-06-21T00:22">
                                    June 21, 2025
                              </time>
                        </div>
                     </li>
                     <li class="featured__item">
                                 <a href="https://techwhale.in/the-complete-beginners-guide-to-uv-pythons-lightning-fast-package-manager/" class="featured__image-link">
                                    <img 
                                          src="https://techwhale.in/media/posts/53/responsive/From-Code-to-Kubernetes-The-Kaniko-Method-for-Node.js-Deployment-2-xs.webp"
                                       class="lazyload"
                                        loading="lazy" 
                                       alt="The Complete Beginner&#x27;s Guide to uv: Python&#x27;s Lightning-Fast Package Manager" 
                                       height="1260" 
                                       width="1260">
                                 </a>                               
                        <div>
                           <a href="https://techwhale.in/the-complete-beginners-guide-to-uv-pythons-lightning-fast-package-manager/" class="featured__title">The Complete Beginner&#x27;s Guide to uv: Python&#x27;s Lightning-Fast Package Manager</a>
                              <time class="u-small" datetime="2025-06-03T19:23">
                                    June 3, 2025
                              </time>
                        </div>
                     </li>
                     <li class="featured__item">
                                 <a href="https://techwhale.in/wordops-backup-the-script-i-wish-i-had-when-my-wordpress-site-needed-saving/" class="featured__image-link">
                                    <img 
                                          src="https://techwhale.in/media/posts/51/responsive/From-Code-to-Kubernetes-The-Kaniko-Method-for-Node.js-Deployment-1-xs.webp"
                                       class="lazyload"
                                        loading="lazy" 
                                       alt="WordOps-Backup: The Script I Wish I Had When My WordPress Site Needed Saving" 
                                       height="1260" 
                                       width="1260">
                                 </a>                               
                        <div>
                           <a href="https://techwhale.in/wordops-backup-the-script-i-wish-i-had-when-my-wordpress-site-needed-saving/" class="featured__title">WordOps-Backup: The Script I Wish I Had When My WordPress Site Needed Saving</a>
                              <time class="u-small" datetime="2025-05-03T02:41">
                                    May 3, 2025
                              </time>
                        </div>
                     </li>
            </ul>
         </section>
      <section class="box">
         <h3 class="box__title">Follow us</h3>
         <div class="follow">
                  <a
                     href="https://www.facebook.com/techwhale.in"
                     class="facebook"
                     aria-label="Facebook">
                     <svg class="u-icon">
                        <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#facebook"/>
                     </svg>
                     Facebook
                  </a>
                  <a href="https://twitter.com/techwhale.in" class="twitter" aria-label="Twitter">
                     <svg class="u-icon">
                        <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#twitter"/>
                     </svg>
                     Twitter
                  </a>
         </div>
      </section>
      <section class="box authors">
         <h3 class="box__title">Authors</h3>
         <ul class="authors__cotainer">
                  <li class="authors__item">
                     <div>
                        <a href="https://techwhale.in/authors/mayur-chavhan/" class="authors__title">Mayur Chavhan</a>
                           <span class="u-small">Post: 
                              34
                           </span>
                     </div>
                  </li>
         </ul>
      </section>


         <section class="box">
            <h3 class="box__title">Tags</h3>
            <ul class="tags">
                     <li>
                        <a href="https://techwhale.in/category/ai/">AI</a>
                        <span class="u-small">(2)</span>
                     </li>
                     <li>
                        <a href="https://techwhale.in/category/ansible/">Ansible</a>
                        <span class="u-small">(3)</span>
                     </li>
                     <li>
                        <a href="https://techwhale.in/category/automation/">Automation</a>
                        <span class="u-small">(9)</span>
                     </li>
                     <li>
                        <a href="https://techwhale.in/category/aws/">AWS</a>
                        <span class="u-small">(2)</span>
                     </li>
                     <li>
                        <a href="https://techwhale.in/category/claude/">CLAUDE</a>
                        <span class="u-small">(2)</span>
                     </li>
            </ul>
         </section>
</div>
<footer class="footer">
        <a class="footer__logo" href="https://techwhale.in/">
                <img src="https://techwhale.in/media/website/imageedit_19_3669952192.png" alt="TechWhale">
        </a>

           <nav>
            <ul class="footer__nav">
            </ul>
           </nav>

            <div class="footer__follow">
                        <a href="https://www.facebook.com/techwhale.in" aria-label="Facebook">
                            <svg>
                                <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#facebook" />
                            </svg>
                        </a>
                        <a href="https://twitter.com/techwhale.in" aria-label="Twitter">
                            <svg>
                                <use xlink:href="https://techwhale.in/assets/svg/svg-map.svg#twitter" />
                            </svg>
                        </a>
            </div>

            <div class="footer__copyright">
                <p>¬© <a href="https://techwhale.in">All copyrights are reserved to TechWhale </a></p>
            </div>

    </footer>
</div>

<script>
   window.MenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };
</script>

<script defer src="https://techwhale.in/assets/js/scripts.min.js?v=ae681ac2b3d516e2313cb9704d36e345"></script>
<script defer src="{{js "prism.js"}}"></script>

<!-- Start main cookie container -->
<div 
    class="pcb"
    data-behaviour="badge"
    data-behaviour-link="#cookie-settings"
    data-revision="1"
    data-config-ttl="90"
    data-debug-mode="false">
    <!-- Start Banner -->
    <div 
        role="dialog" 
        aria-modal="true" 
        aria-hidden="true" 
        aria-labelledby="pcb-title" 
        aria-describedby="pcb-txt" 
        class="pcb__banner ">
        <div class="pcb__inner">
            <div 
                id="pcb-title" 
                role="heading" 
                aria-level="2" 
                class="pcb__title">
                This website uses cookies
            </div>
            <div 
                id="pcb-txt" 
                class="pcb__txt">
                Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality.
                <a href="#not-specified">More details...</a>
            </div>
          
            <div class="pcb__buttons">
                
                <button 
                    type="button" 
                    class="pcb__btn pcb__btn--link pcb__btn--configure" 
                    aria-haspopup="dialog">
                    Manage preferences
                </button>
                
                
                <button 
                    type="button" 
                    class="pcb__btn pcb__btn--solid pcb__btn--accept">
                    Save
                </button>
            </div>
        </div>
    </div>
    <!-- End of Banner -->

    
    <!-- Start Popup -->
    <div 
        class="pcb__popup" 
        role="dialog" 
        aria-modal="true" 
        aria-hidden="true" 
        aria-labelledby="pcb-popup-title">
        <div class="pcb__popup__wrapper">
            <div class="pcb__inner pcb__popup__inner">
                <div class="pcb__popup__heading">
                    <div 
                        id="pcb-popup-title" 
                        role="heading" 
                        aria-level="2"
                        class="pcb__title">
                        Cookie settings
                    </div>
                    <button class="pcb__popup__close" aria-label="Close"></button>
                </div>
             
                <div class="pcb__popup__content">
                    <div class="pcb__txt pcb__popup__txt">
                        We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.

                        
                        <a href="#not-specified">More details...</a>
                        
                    </div>
                
                    <ul class="pcb__groups">
                        <li class="pcb__group">
                    <details>
                        <summary class="pcb__group__title no-desc">
                            Required
                        </summary>
                        
                    </details>
                    <div class="pcb__popup__switch is-checked">
                        <input 
                            type="checkbox" 
                            data-group-name=""
                            id="pcb-group-0" 
                            checked>
                        <label for="pcb-group-0">Required</label>
                    </div>
                </li>
            <li class="pcb__group">
                <details>
                    <summary class="pcb__group__title no-desc">
                        Functionality
                    </summary>
                    
                </details>
                <div class="pcb__popup__switch">
                    <input 
                        type="checkbox"
                        data-group-name="functions"
                        id="functions-cookies" />
                    <label for="functions-cookies">
                        Functionality
                    </label>
                </div>
            </li>
            <li class="pcb__group">
                <details>
                    <summary class="pcb__group__title no-desc">
                        Analytical
                    </summary>
                    
                </details>
                <div class="pcb__popup__switch">
                    <input 
                        type="checkbox"
                        data-group-name="analytics"
                        id="analytics-cookies" />
                    <label for="analytics-cookies">
                        Analytical
                    </label>
                </div>
            </li>
            <li class="pcb__group">
                <details>
                    <summary class="pcb__group__title no-desc">
                        Marketing
                    </summary>
                    
                </details>
                <div class="pcb__popup__switch">
                    <input 
                        type="checkbox"
                        data-group-name="marketing"
                        id="marketing-cookies" />
                    <label for="marketing-cookies">
                        Marketing
                    </label>
                </div>
            </li>
                    </ul>
                </div>

                <div class="pcb__buttons pcb__popup__buttons">
                    <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button>
                    <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button>
                    <button type="button" class="pcb__btn pcb__btn--save">Save settings</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Popup -->
    <!-- Overlay -->
    <div class="pcb__overlay" aria-hidden="true"></div>
    <!-- End of Overlay -->
    

    
    <!-- Badge -->
    <button 
        class="pcb__badge" 
        aria-label="Cookie Policy"
        aria-hidden="true">
        <svg 
            xmlns="http://www.w3.org/2000/svg" 
            aria-hidden="true" 
            focusable="false" 
            width="40" 
            height="40" 
            viewBox="0 0 23 23" 
            fill="currentColor">
            <path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z" />
        </svg>
    </button>
    <!-- End of Badge -->
    
</div>
<!-- End of main cookie container -->

        <script>
            
                window.dataLayer = window.dataLayer || [];
                function gtag() { dataLayer.push(arguments); }

                window.publiiCBGCM = {
                    defaultState: {"ad_storage":false,"ad_personalization":false,"ad_user_data":false,"analytics_storage":true,"personalization_storage":false,"functionality_storage":false,"security_storage":false},
                    groups: []
                };
            
            (function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('üç™ Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('üç™ Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('üç™ Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('üç™ GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('üç™ Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('üç™ Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);

        </script>
</body>
</html>
